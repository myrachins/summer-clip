defaults:
  - hydra_setup
  - adapter_setup
  - saved_paths: clip_paths
  - img_attn_dataset@dataset_cfg: sun397
  - dataset: tip_dataset_test_no_image
  - dataset@cache.dataset: tip_dataset_train_no_image
  - _self_
  - cache_value_strategy: hard_cache
  - cache_weights_strategy: tip_adapter
  # https://github.com/facebookresearch/hydra/issues/1939
  - cache_strategy@cache_strategies.topk: topk
  - cache_strategy@cache_strategies.topk_prob: topk_prob
  - cache_strategy@cache_strategies.topk_per_gold: topk_per_gold
  - cache_strategy@cache_strategies.topk_prob_per_gold: topk_prob_per_gold
  - cache_strategy@cache_strategies.per_pred_class_random: per_pred_class_random
  - cache_strategy@cache_strategies.per_gold_class_random: per_gold_class_random
  - cache_strategy@cache_strategies.global_random: global_random
  - cache_strategy@cache_strategies.all_logits: all_logits

dataset_name: ${dataset_cfg.dataset_name}
prompting: ${dataset_cfg.prompting}

clip:
  model_name: RN50

data:
  image_features_path: ${dataset_cfg.data.image_features_path}

cache:
  image_features_path: ${dataset_cfg.cache.image_features_path}
  image_outs_path: ${dataset_cfg.cache.image_outs_path}
  alpha: [0.0, 0.1, 0.5, 1., 2., 3., 4.]
  replace_outs_with_golds: false

run_saves:
  save_labels: false
  save_cache_inds: false
  save_preds: false
  save_logits: false

exp:
  project: clip_searcher
  name: image_attention

# hydra:
#   mode: MULTIRUN
#   sweeper:
#     params:
#       cache_strategy: topk, global_random
#       prompting: tip_imagenet, imagenet
